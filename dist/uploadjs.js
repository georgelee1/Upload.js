/** Upload.js (1.2.1) | https://github.com/georgelee1/Upload.js | MIT */!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,o){function a(o,a){t.trigger("delete.started",{id:o}),n.get("delete.url","delete.param","delete.additionalParams","delete.headers",function(n,i,u,f){var l=Object.assign({},u,r({},i,o));e(n,l,f).done(function(e){var n=e.success;n===!0||"true"===n?t.trigger("delete.done",{id:o}):t.trigger("delete.failed",{id:o}),a()}).fail(function(){t.trigger("delete.failed",{id:o}),a()})})}function i(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(e){t.trigger("delete.added",{id:e}),o.offer(function(t){return a(e,t)})})}return{del:i}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],2:[function(e,t,n){"use strict";function r(e){function t(e){return r.indexOf(e.toLowerCase())>=0}function n(n,i){a?(a.push([n,i]),1===a.length&&e.get("allowed_types","types",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=[].concat.apply([],e.map(function(e){return n[e]||e})).map(function(e){return e.toLowerCase()}),a.forEach(function(e){var n=o(e,2),r=n[0],a=n[1];return a(t(r))}),a=void 0})):i(t(n))}var r=void 0,a=[];return{isAllowed:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(f){o=!0,a=f}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n["default"]=r},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r){function a(r,a,i){t.trigger("upload.started",{file:r,id:a}),n.get("upload.url","upload.param","upload.additionalParams","upload.headers",function(n,u,f,l){var d=Object.assign({},f,o({},u,r));e(n,d,l).progress(function(e){return t.trigger("upload.progress",{file:r,id:a,progress:e})}).done(function(e){var n=e.success,o=e.uploadImageId;n===!0||"true"===n?t.trigger("upload.done",{file:r,id:a,uploadImageId:o}):t.trigger("upload.failed",{file:r,id:a}),i()}).fail(function(){t.trigger("upload.failed",{file:r,id:a}),i()})})}function i(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){var n=e.file,o=e.id;f.isAllowed(n.type,function(e){e?(t.trigger("upload.added",{file:n,id:o}),r.offer(function(e){return a(n,o,e)})):t.trigger("upload.rejected",{file:n,id:o,rejected:"type"})})})}var f=(0,u["default"])(n);return{upload:i}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var i=e("./types"),u=r(i)},{"./types":2}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=(0,i["default"])(function(e,t){e(t)},{delay:100}),o=(0,f["default"])(e,t,n,r),a=(0,d["default"])(e,t,n,r);return{upload:o.upload,del:a.del}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var a=e("./util/queue"),i=r(a),u=e("./actions/upload"),f=r(u),l=e("./actions/delete"),d=r(l)},{"./actions/delete":1,"./actions/upload":3,"./util/queue":9}],5:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){function e(e){return"undefined"!=typeof e&&!("object"===("undefined"==typeof e?"undefined":a(e))&&!e)}function t(t,n,o){var a=f.concat(c.reduce(function(e,t){return e.concat(t)},[]));a.length&&a.indexOf(t)<0&&console.warn("Attemping to listen to an unknown event. "+("'"+t+"' is not one of '"+a.join(", ")+"'")),"function"==typeof n&&(o=n,n=i);var u=e(n)?n.toString():i;"function"==typeof o&&(l[t]||(l[t]=r({},i,[])),l[t][u]||(l[t][u]=[]),l[t][u].push(o))}function n(t,n){if(l[t]){var o=!!e(n)&&n.toString();o?delete l[t][o]:l[t]=r({},i,[])}}function o(t,n){if(l[t]){var r=!!e(n.id)&&n.id.toString();r&&l[t][r]&&l[t][r].forEach(function(e){return e(Object.assign({type:t},n))}),l[t][i].forEach(function(e){return e(Object.assign({type:t},n))})}d.forEach(function(e){return e.trigger(t,n)})}function u(e){e&&e.trigger&&(d.push(e),e._parent(f))}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l={},d=[],c=[];return{on:t,off:n,trigger:o,emit:u,_parent:function(e){c.push(e)}}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=o;var i="$all"},{}],6:[function(e,t,n){"use strict";function r(e){function t(e){return"function"==typeof e&&(l=e),s}function n(e){return"function"==typeof e&&(d=e),s}function r(e){return"function"==typeof e&&(c=e),s}function i(){var t=!1,n=new FormData,r=[];Object.keys(u).forEach(function(e){var o=u[e];Array.isArray(o)?o.forEach(function(o){o.type&&o.name?(t=!0,n.append(e,o,o.name)):(n.append(e,o),r.push([e,o]))}):o.type&&o.name?(t=!0,n.append(e,o,o.name)):(n.append(e,o),r.push([e,o]))});var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState)if(a.status>=200&&a.status<300)try{d(JSON.parse(a.response))}catch(e){d({})}else c()},a.upload.addEventListener("progress",function(e){l(Math.ceil(e.loaded/e.total*100))},!1),a.open("POST",e,!0),f&&Object.keys(f).forEach(function(e){a.setRequestHeader(e,f[e])}),t?a.send(n):(a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(r.map(function(e){var t=o(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&")))}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=a,d=a,c=a,s={};return s.progress=t,s.done=n,s.fail=r,i(),s}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(f){o=!0,a=f}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n["default"]=r;var a=function(){}},{}],7:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e&&"object"===("undefined"==typeof e?"undefined":i(e))&&!Array.isArray(e)}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var u=n.shift();return o(e)&&o(u)&&Object.keys(u).forEach(function(t){o(u[t])?(e[t]||(e[t]={}),a(e[t],u[t])):Object.assign(e,r({},t,u[t]))}),a.apply(void 0,[e].concat(n))}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=a},{}],8:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){function t(t){return t.map(function(t){var n=void 0,r=e;return t.split(".").forEach(function(e){n=r[e],r=n||{}}),n})}function n(){for(var e=[],n=void 0,o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];a.forEach(function(t){"string"==typeof t?e.push(t):"function"==typeof t&&(n=t)});var u=t(e);if(!n)return u=u.map(function(e){return"function"!=typeof e?e:0===e.length?e():void 0}),u.length>1?u:u[0];var f=u.filter(function(e){return"function"==typeof e}).length;if(0===f)n.apply(void 0,r(u));else{var l=function(e){return function(t){u[e]=t,f--,0===f&&n.apply(void 0,r(u))}};u.forEach(function(e,t){"function"==typeof e&&(e.length>0?e(l(t)):l(t)(e()))})}}return{get:n}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],9:[function(e,t,n){"use strict";function r(e){function t(){if(l.length<a){var e=f.shift();if(void 0!==e){var n=++d,r=function(){var e=l.indexOf(n);e>=0&&(l.splice(e,1),t())},u=function(){return o.apply(void 0,[e.item,r])};l.push(n),i?setTimeout(u,i):u()}}}function n(e){return(!u||f.length<u)&&(f.push({item:e}),t(),!0)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e,a=Math.max(r.concurrency,1)||1,i=Math.max(r.delay,0)||0,u=Math.max(r.size,0)||0,f=[],l=[],d=0;return{offer:n}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],10:[function(e,t,n){"use strict";t.exports={max:10,types:{images:["image/jpg","image/jpeg","image/png","image/gif"]},allowed_types:["images"],upload:{url:"",param:"file",additionalParams:{},headers:{}},"delete":{url:"",param:"file",additionalParams:{},headers:{}}}},{}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=(0,f.make)("div",{"class":"item new"}),t=(0,f.make)("div",{"class":"icon plus"});return(0,f.append)(e,t),e}function i(e,t){var n=(0,f.make)("input",{type:"file",multiple:"multiple"});return(0,f.on)(n,"change",function(){for(var e=Date.now(),r=0;r<n.files.length;r++)t.trigger("file.picked",{file:n.files.item(r),id:r+"_"+e})}),(0,f.on)(e,"click",n.click.bind(n)),n}function u(e,t,n){(0,f.addClass)(e,"uploadjs");var r=(0,f.make)("div",{"class":"uploadjs-container"});f.append.apply(void 0,[r].concat(o(t)));var u=(0,f.make)("div",{"class":"uploadjs-container"});(0,f.append)(e,r,u);var c=a();return(0,f.append)(u,c),(0,f.append)(e,i(c,n)),n.on("upload.added",function(e){var t=e.file,o=e.id,a=(0,d["default"])({type:l.TYPE_IMAGE,fileId:o,file:t,events:n});(0,f.append)(r,a)}),t.splice(0,t.length),(0,f.data)(e,"upload",{url:"upload.url",param:"upload.param",deleteUrl:"delete.url",deleteParam:"delete.param",allowedTypes:"allowed_types",additionalParam:"upload.additionalParams",header:"upload.headers",deleteAdditionalParam:"delete.additionalParams",deleteHeader:"delete.headers"})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var f=e("./dom"),l=e("./item"),d=r(l)},{"./dom":12,"./item":13}],12:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){for(var n=[],r=e.children,o=(t||"").toLowerCase(),a=0;a<r.length;a++){var i=r.item(a);t&&i.nodeName.toLowerCase()!==o||n.push(i)}return n}function a(e){for(var t=e.className?e.className.split(" "):[],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),e.className=t.join(" ")}function i(e){for(var t=e.className?e.className.split(" "):[],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach(function(e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}),e.className=t.join(" ")}function u(e,t){var n=document.createElement(e);return t&&Object.keys(t).forEach(function(e){"class"===e?a.apply(void 0,[n].concat(r((t[e]||"").split(" ")))):n.setAttribute(e,t[e])}),n}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){e.appendChild(t)})}function l(e,t){return"up-marker-"+e+"-"+t}function d(e,t){f(e,document.createComment(l(t,"start")),document.createComment(l(t,"end")))}function c(e,t){for(var n=l(t,"start"),r=l(t,"end"),o=!1,a=e.firstChild,i=function(e,t){return a.parentNode.insertBefore(t,e)},u=arguments.length,f=Array(u>2?u-2:0),d=2;d<u;d++)f[d-2]=arguments[d];for(;a;){if(8===a.nodeType){if(a.nodeValue===n){o=!0,a=a.nextSibling;continue}if(a.nodeValue===r)return void f.forEach(i.bind(void 0,a))}if(o){var c=a.nextSibling;a.parentNode.removeChild(a),a=c}else a=a.nextSibling}}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function p(e){for(var t={},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(n){t[n]=e.getAttribute(n)}),t}function v(e,t,n){e.addEventListener(t,n)}function m(e,t,n){var r=e,o=t.split("."),a=o.pop();o.forEach(function(e){var t=r[e];t||(t={},r[e]=t),r=t}),"object"===("undefined"==typeof r?"undefined":g(r))&&(r[a]=n)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return Object.keys(e.dataset).filter(function(e){return e.startsWith(t)}).forEach(function(o){var a=o.substr(t.length);a=a.charAt(0).toLowerCase()+a.slice(1);var i="",u=0;Object.keys(n).forEach(function(e){var t=a.indexOf(e);if(t>=0&&u<e.length){u=e.length;var r=a.slice(e.length);i=n[e]+(r?"."+(r.charAt(0).toLowerCase()+r.slice(1)):"")}}),m(r,i||a,e.dataset[o])}),r}Object.defineProperty(n,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.children=o,n.addClass=a,n.removeClass=i,n.make=u,n.append=f,n.marker=d,n.replaceMarker=c,n.empty=s,n.attrs=p,n.on=v,n.set=m,n.data=y},{}],13:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(e.file){var t=(0,v.make)("img"),n=new FileReader;return n.onload=function(e){t.setAttribute("src",e.target.result)},n.readAsDataURL(e.file),Object.assign({},e,{ele:t})}return Object.assign({},e,{ele:(0,v.make)("img",{src:e.src})})}function a(e){var t=!!e.file,n=(0,v.make)("div",{"class":["item"].concat(t?["uploading"]:[]).join(" ")});(0,v.append)(n,e.ele),(0,v.marker)(n,"status"),(0,v.marker)(n,"actions");var r=void 0;return t&&(r=(0,v.make)("div",{"class":"progress"}),(0,v.replaceMarker)(n,"status",(0,v.make)("div",{"class":"spinner"}),(0,v.make)("div",{"class":"icon upload"}),r)),Object.assign({},e,{ele:n,_progress:r})}function i(e,t,n){var r=(0,v.make)("div",{"class":"icon "+t});(0,v.append)(r,(0,v.make)("i")),(0,v.replaceMarker)(e,"status",r),setTimeout(function(){(0,v.addClass)(r,"going"),setTimeout(function(){(0,v.replaceMarker)(e,"status"),(0,v.removeClass)(r,"going"),n&&n()},2e3)},2e3)}function u(e){e.events.off("upload.added",e.fileId),e.events.off("upload.started",e.fileId),e.events.off("upload.progress",e.fileId),e.events.off("upload.done",e.fileId),e.events.off("upload.failed",e.fileId)}function f(e){e.events.off("delete.added",e.fileId),e.events.off("delete.started",e.fileId),e.events.off("delete.done",e.fileId),e.events.off("delete.failed",e.fileId)}function l(e,t){(0,v.addClass)(e,"removed"),setTimeout(function(){e.parentNode.removeChild(e)},1e3),u(t),f(t)}function d(e,t){t.events.on("delete.added",t.id,function(){(0,v.addClass)(e,"removing"),(0,v.replaceMarker)(e,"status",(0,v.make)("div",{"class":"spinner"}),(0,v.make)("div",{"class":"icon trash"}))}),t.events.on("delete.done",t.id,function(){setTimeout(function(){(0,v.removeClass)(e,"removing"),l(e,t)},500)}),t.events.on("delete.failed",t.id,function(){setTimeout(function(){(0,v.removeClass)(e,"removing"),i(e,"error")},500)})}function c(e,t){if(t.id){var n=(0,v.make)("div",{"class":"actions"}),r=(0,v.make)("div",{"class":"action del"});(0,v.append)(n,r),(0,v.append)(r,(0,v.make)("div",{"class":"trash"})),(0,v.replaceMarker)(e,"actions",n),(0,v.on)(r,"click",function(){return t.events.trigger("file.delete",{id:t.id})}),d(e,t)}else(0,v.addClass)(e,"static")}function s(e,t,n){n.events.on("upload.progress",n.fileId,function(e){var n=e.progress,r=0-(100-n);t.style.transform="translateX("+r+"%)"}),n.events.on("upload.done",n.fileId,function(t){var r=t.id;n.id=r,i(e,"done"),(0,v.removeClass)(e,"uploading"),c(e,n),u(n)}),n.events.on("upload.failed",n.fileId,function(){(0,v.addClass)(e,"stopped"),i(e,"error",function(){l(e,n)})})}function p(e){var t=a((y[e.type]||y.NOOP)(e));return e.fileId?s(t.ele,t._progress,e):c(t.ele,e),t.ele}Object.defineProperty(n,"__esModule",{value:!0}),n.TYPE_IMAGE=void 0,n.imageRenderer=o,n["default"]=p;var v=e("./dom"),m=n.TYPE_IMAGE="image",y=r({NOOP:function(){return(0,v.make)("div")}},m,o)},{"./dom":12}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return(0,f["default"])(Object.assign({type:u.TYPE_IMAGE},(0,i.attrs)(e,"src"),{id:e.dataset.uploadImageId,events:t}))}function a(e,t){var n=(0,i.children)(e,"img").map(function(e){return o(e,t)});return(0,i.empty)(e),(0,d["default"])(e,n,t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var i=e("./dom"),u=e("./item"),f=r(u),l=e("./container"),d=r(l)},{"./container":11,"./dom":12,"./item":13}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=e("./render/parse"),i=r(a),u=e("./core"),f=r(u),l=e("./core/util/http"),d=r(l),c=e("./core/util/events"),s=r(c),p=e("./core/util/options"),v=r(p),m=e("./core/util/merge"),y=r(m),g=e("./defaults"),h=r(g);window.UploadJs=function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,b);var n=(0,s["default"])(["upload.added","upload.started","upload.progress","upload.done","upload.failed","delete.added","delete.started","delete.done","delete.failed"]),r=(0,s["default"])(["file.picked","file.delete"]);n.emit(r);var a=(0,i["default"])(e,r),u=(0,v["default"])((0,y["default"])({},h["default"],a,t)),l=(0,f["default"])(d["default"],n,u);r.on("file.picked",function(e){return l.upload(e)}),r.on("file.delete",function(e){return l.del(e.id)})}},{"./core":4,"./core/util/events":5,"./core/util/http":6,"./core/util/merge":7,"./core/util/options":8,"./defaults":10,"./render/parse":14}]},{},[15]);