/** Upload.js (1.2.1) | https://github.com/georgelee1/Upload.js | MIT */!function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,o){function i(o,i){t.trigger("delete.started",{id:o}),n.get("delete.url","delete.param","delete.additionalParams","delete.headers",function(n,a,u,l){var f=Object.assign({},u,r({},a,o));e(n,f,l).done(function(e){var n=e.success;n===!0||"true"===n?t.trigger("delete.done",{id:o}):t.trigger("delete.failed",{id:o}),i()}).fail(function(){t.trigger("delete.failed",{id:o}),i()})})}function a(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(e){t.trigger("delete.added",{id:e}),o.offer(function(t){return i(e,t)})})}return{del:a}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],2:[function(e,t,n){"use strict";function r(e){function t(e){return r.indexOf(e.toLowerCase())>=0}function n(n,a){i?(i.push([n,a]),1===i.length&&e.get("allowed_types","types",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=[].concat.apply([],e.map(function(e){return n[e]||e})).map(function(e){return e.toLowerCase()}),i.forEach(function(e){var n=o(e,2),r=n[0],i=n[1];return i(t(r))}),i=void 0})):a(t(n))}var r=void 0,i=[];return{isAllowed:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n["default"]=r},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n,r){function i(r,i,a){t.trigger("upload.started",{file:r,id:i}),n.get("upload.url","upload.param","upload.additionalParams","upload.headers",function(n,u,l,f){var d=Object.assign({},l,o({},u,r));e(n,d,f).progress(function(e){return t.trigger("upload.progress",{file:r,id:i,progress:e})}).done(function(e){var n=e.success,o=e.uploadImageId;n===!0||"true"===n?t.trigger("upload.done",{file:r,id:i,uploadImageId:o}):t.trigger("upload.failed",{file:r,id:i}),a()}).fail(function(){t.trigger("upload.failed",{file:r,id:i}),a()})})}function a(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){var n=e.file,o=e.id;l.isAllowed(n.type,function(e){e?(t.trigger("upload.added",{file:n,id:o}),r.offer(function(e){return i(n,o,e)})):t.trigger("upload.rejected",{file:n,id:o,rejected:"type"})})})}var l=(0,u["default"])(n);return{upload:a}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var a=e("./types"),u=r(a)},{"./types":2}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=(0,a["default"])(function(e,t){e(t)},{delay:100}),o=(0,l["default"])(e,t,n,r),i=(0,d["default"])(e,t,n,r);return{upload:o.upload,del:i.del}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var i=e("./util/queue"),a=r(i),u=e("./actions/upload"),l=r(u),f=e("./actions/delete"),d=r(f)},{"./actions/delete":1,"./actions/upload":3,"./util/queue":9}],5:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){function e(e){return"undefined"!=typeof e&&!("object"===("undefined"==typeof e?"undefined":i(e))&&!e)}function t(t,n,o){var i=l.concat(c.reduce(function(e,t){return e.concat(t)},[]));i.length&&i.indexOf(t)<0&&console.warn("Attemping to listen to an unknown event. "+("'"+t+"' is not one of '"+i.join(", ")+"'")),"function"==typeof n&&(o=n,n=a);var u=e(n)?n.toString():a;"function"==typeof o&&(f[t]||(f[t]=r({},a,[])),f[t][u]||(f[t][u]=[]),f[t][u].push(o))}function n(t,n){if(f[t]){var o=!!e(n)&&n.toString();o?delete f[t][o]:f[t]=r({},a,[])}}function o(t,n){if(f[t]){var r=!!e(n.id)&&n.id.toString();r&&f[t][r]&&f[t][r].forEach(function(e){return e(Object.assign({type:t},n))}),f[t][a].forEach(function(e){return e(Object.assign({type:t},n))})}d.forEach(function(e){return e.trigger(t,n)})}function u(e){e&&e.trigger&&(d.push(e),e._parent(l))}var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f={},d=[],c=[];return{on:t,off:n,trigger:o,emit:u,_parent:function(e){c.push(e)}}}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=o;var a="$all"},{}],6:[function(e,t,n){"use strict";function r(e){function t(e){return"function"==typeof e&&(f=e),s}function n(e){return"function"==typeof e&&(d=e),s}function r(e){return"function"==typeof e&&(c=e),s}function a(){var t=!1,n=new FormData,r=[];Object.keys(u).forEach(function(e){var o=u[e];Array.isArray(o)?o.forEach(function(o){o.type&&o.name?(t=!0,n.append(e,o,o.name)):(n.append(e,o),r.push([e,o]))}):o.type&&o.name?(t=!0,n.append(e,o,o.name)):(n.append(e,o),r.push([e,o]))});var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<300)try{d(JSON.parse(i.response))}catch(e){d({})}else c()},i.upload.addEventListener("progress",function(e){f(Math.ceil(e.loaded/e.total*100))},!1),i.open("POST",e,!0),l&&Object.keys(l).forEach(function(e){i.setRequestHeader(e,l[e])}),t?i.send(n):(i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r.map(function(e){var t=o(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&")))}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=i,d=i,c=i,s={};return s.progress=t,s.done=n,s.fail=r,a(),s}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n["default"]=r;var i=function(){}},{}],7:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e&&"object"===("undefined"==typeof e?"undefined":a(e))&&!Array.isArray(e)}function i(e,t){if(Array.isArray(t)||(t=[t]),!t.length)return e;var n=t.shift();return o(e)&&o(n)&&Object.keys(n).forEach(function(t){o(n[t])?(e[t]||(e[t]={}),i(e[t],n[t])):Object.assign(e,r({},t,n[t]))}),i(e,t)}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=i},{}],8:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){function t(t){return t.map(function(t){var n=void 0,r=e;return t.split(".").forEach(function(e){n=r[e],r=n||{}}),n})}function n(){for(var e=[],n=void 0,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];i.forEach(function(t){"string"==typeof t?e.push(t):"function"==typeof t&&(n=t)});var u=t(e);if(!n)return u=u.map(function(e){return"function"!=typeof e?e:0===e.length?e():void 0}),u.length>1?u:u[0];var l=u.filter(function(e){return"function"==typeof e}).length;if(0===l)n.apply(void 0,r(u));else{var f=function(e){return function(t){u[e]=t,l--,0===l&&n.apply(void 0,r(u))}};u.forEach(function(e,t){"function"==typeof e&&(e.length>0?e(f(t)):f(t)(e()))})}}return{get:n}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],9:[function(e,t,n){"use strict";function r(e){function t(){if(f.length<i){var e=l.shift();if(void 0!==e){var n=++d,r=function(){var e=f.indexOf(n);e>=0&&(f.splice(e,1),t())},u=function(){return o.apply(void 0,[e.item,r])};f.push(n),a?setTimeout(u,a):u()}}}function n(e){return(!u||l.length<u)&&(l.push({item:e}),t(),!0)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e,i=Math.max(r.concurrency,1)||1,a=Math.max(r.delay,0)||0,u=Math.max(r.size,0)||0,l=[],f=[],d=0;return{offer:n}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],10:[function(e,t,n){"use strict";t.exports={max:1/0,types:{images:["image/jpg","image/jpeg","image/png","image/gif"]},allowed_types:["images"],upload:{url:"",param:"file",additionalParams:{},headers:{}},"delete":{url:"",param:"file",additionalParams:{},headers:{}}}},{}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=(0,l.make)("div",{"class":"item new"}),t=(0,l.make)("div",{"class":"icon plus"});return(0,l.append)(e,t),e}function a(e,t,n,r){var o=(0,l.make)("input",{type:"file",multiple:"multiple"});return(0,l.on)(o,"change",function(){for(var e=Date.now(),i=0;i<o.files.length&&n.count+i<r;i++)t.trigger("file.picked",{file:o.files.item(i),id:i+"_"+e})}),(0,l.on)(e,"click",o.click.bind(o)),o}function u(e,t,n,r,u){var c={count:0};(0,l.addClass)(e,"uploadjs");var p=(0,l.data)(e,"upload",{url:"upload.url",param:"upload.param",deleteUrl:"delete.url",deleteParam:"delete.param",allowedTypes:"allowed_types",additionalParam:"upload.additionalParams",header:"upload.headers",deleteAdditionalParam:"delete.additionalParams",deleteHeader:"delete.headers"}),m=(0,s["default"])((0,v["default"])({},[r,p,u]));return m.get("max",function(r){var u=(0,l.make)("div",{"class":"uploadjs-container"}),s=(0,l.make)("div",{"class":"uploadjs-container"}),p=t.slice(0,r);c.count=p.length,l.append.apply(void 0,[u].concat(o(p))),(0,l.append)(e,u,s);var v=i();(0,l.append)(s,v),(0,l.append)(e,a(v,n,c,r)),n.on("upload.added",function(e){var t=e.file,r=e.id,o=(0,d["default"])({type:f.TYPE_IMAGE,fileId:r,file:t,events:n});(0,l.append)(u,o)});var m=function(e){c.count+e<r?(0,l.removeClass)(v,"hide"):(0,l.addClass)(v,"hide")};n.on("file.picked",m.bind(null,1)),n.on("item.removed",m.bind(null,-1)),t.splice(0,t.length)}),m}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var l=e("./dom"),f=e("./item"),d=r(f),c=e("../core/util/options"),s=r(c),p=e("../core/util/merge"),v=r(p)},{"../core/util/merge":7,"../core/util/options":8,"./dom":12,"./item":13}],12:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){for(var n=[],r=e.children,o=(t||"").toLowerCase(),i=0;i<r.length;i++){var a=r.item(i);t&&a.nodeName.toLowerCase()!==o||n.push(a)}return n}function i(e){for(var t=e.className?e.className.split(" "):[],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),e.className=t.join(" ")}function a(e){for(var t=e.className?e.className.split(" "):[],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach(function(e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}),e.className=t.join(" ")}function u(e,t){var n=document.createElement(e);return t&&Object.keys(t).forEach(function(e){"class"===e?i.apply(void 0,[n].concat(r((t[e]||"").split(" ")))):n.setAttribute(e,t[e])}),n}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){e.appendChild(t)})}function f(e,t){return"up-marker-"+e+"-"+t}function d(e,t){l(e,document.createComment(f(t,"start")),document.createComment(f(t,"end")))}function c(e,t){for(var n=f(t,"start"),r=f(t,"end"),o=!1,i=e.firstChild,a=function(e,t){return i.parentNode.insertBefore(t,e)},u=arguments.length,l=Array(u>2?u-2:0),d=2;d<u;d++)l[d-2]=arguments[d];for(;i;){if(8===i.nodeType){if(i.nodeValue===n){o=!0,i=i.nextSibling;continue}if(i.nodeValue===r)return void l.forEach(a.bind(void 0,i))}if(o){var c=i.nextSibling;i.parentNode.removeChild(i),i=c}else i=i.nextSibling}}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function p(e){for(var t={},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(n){t[n]=e.getAttribute(n)}),t}function v(e,t,n){e.addEventListener(t,n)}function m(e,t,n){var r=e,o=t.split("."),i=o.pop();o.forEach(function(e){var t=r[e];t||(t={},r[e]=t),r=t}),"object"===("undefined"==typeof r?"undefined":g(r))&&(r[i]=n)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return Object.keys(e.dataset).filter(function(e){return e.startsWith(t)}).forEach(function(o){var i=o.substr(t.length);i=i.charAt(0).toLowerCase()+i.slice(1);var a="",u=0;Object.keys(n).forEach(function(e){var t=i.indexOf(e);if(t>=0&&u<e.length){u=e.length;var r=i.slice(e.length);a=n[e]+(r?"."+(r.charAt(0).toLowerCase()+r.slice(1)):"")}}),m(r,a||i,e.dataset[o])}),r}Object.defineProperty(n,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.children=o,n.addClass=i,n.removeClass=a,n.make=u,n.append=l,n.marker=d,n.replaceMarker=c,n.empty=s,n.attrs=p,n.on=v,n.set=m,n.data=y},{}],13:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(e.file){var t=(0,v.make)("img"),n=new FileReader;return n.onload=function(e){t.setAttribute("src",e.target.result)},n.readAsDataURL(e.file),Object.assign({},e,{ele:t})}return Object.assign({},e,{ele:(0,v.make)("img",{src:e.src})})}function i(e){var t=!!e.file,n=(0,v.make)("div",{"class":["item"].concat(t?["uploading"]:[]).join(" ")});(0,v.append)(n,e.ele),(0,v.marker)(n,"status"),(0,v.marker)(n,"actions");var r=void 0;return t&&(r=(0,v.make)("div",{"class":"progress"}),(0,v.replaceMarker)(n,"status",(0,v.make)("div",{"class":"spinner"}),(0,v.make)("div",{"class":"icon upload"}),r)),Object.assign({},e,{ele:n,_progress:r})}function a(e,t,n){var r=(0,v.make)("div",{"class":"icon "+t});(0,v.append)(r,(0,v.make)("i")),(0,v.replaceMarker)(e,"status",r),setTimeout(function(){(0,v.addClass)(r,"going"),setTimeout(function(){(0,v.replaceMarker)(e,"status"),(0,v.removeClass)(r,"going"),n&&n()},2e3)},2e3)}function u(e){e.fileId&&(e.events.off("upload.added",e.fileId),e.events.off("upload.started",e.fileId),e.events.off("upload.progress",e.fileId),e.events.off("upload.done",e.fileId),e.events.off("upload.failed",e.fileId))}function l(e){e.id&&(e.events.off("delete.added",e.id),e.events.off("delete.started",e.id),e.events.off("delete.done",e.id),e.events.off("delete.failed",e.id))}function f(e,t){(0,v.addClass)(e,"removed"),setTimeout(function(){e.parentNode.removeChild(e),t.events.trigger("item.removed",{id:t.id})},600),u(t),l(t)}function d(e,t){t.events.on("delete.added",t.id,function(){(0,v.addClass)(e,"removing"),(0,v.replaceMarker)(e,"status",(0,v.make)("div",{"class":"spinner"}),(0,v.make)("div",{"class":"icon trash"}))}),t.events.on("delete.done",t.id,function(){setTimeout(function(){(0,v.removeClass)(e,"removing"),f(e,t)},500)}),t.events.on("delete.failed",t.id,function(){setTimeout(function(){(0,v.removeClass)(e,"removing"),a(e,"error")},500)})}function c(e,t){if(t.id){var n=(0,v.make)("div",{"class":"actions"}),r=(0,v.make)("div",{"class":"action del"});(0,v.append)(n,r),(0,v.append)(r,(0,v.make)("div",{"class":"trash"})),(0,v.replaceMarker)(e,"actions",n),(0,v.on)(r,"click",function(){return t.events.trigger("file.delete",{id:t.id})}),d(e,t)}else(0,v.addClass)(e,"static")}function s(e,t,n){n.events.on("upload.progress",n.fileId,function(e){var n=e.progress,r=0-(100-n);t.style.transform="translateX("+r+"%)"}),n.events.on("upload.done",n.fileId,function(t){var r=t.id;n.id=r,a(e,"done"),(0,v.removeClass)(e,"uploading"),c(e,n),u(n)}),n.events.on("upload.failed",n.fileId,function(){(0,v.addClass)(e,"stopped"),a(e,"error",function(){f(e,n)})})}function p(e){var t=i((y[e.type]||y.NOOP)(e));return e.fileId?s(t.ele,t._progress,e):c(t.ele,e),t.ele}Object.defineProperty(n,"__esModule",{value:!0}),n.TYPE_IMAGE=void 0,n.imageRenderer=o,n["default"]=p;var v=e("./dom"),m=n.TYPE_IMAGE="image",y=r({NOOP:function(){return(0,v.make)("div")}},m,o)},{"./dom":12}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return(0,l["default"])(Object.assign({type:u.TYPE_IMAGE},(0,a.attrs)(e,"src"),{id:e.dataset.uploadImageId,events:t}))}function i(e,t,n,r){var i=(0,a.children)(e,"img").map(function(e){return o(e,t)});return(0,a.empty)(e),(0,d["default"])(e,i,t,n,r)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var a=e("./dom"),u=e("./item"),l=r(u),f=e("./container"),d=r(f)},{"./container":11,"./dom":12,"./item":13}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./render/parse"),u=r(a),l=e("./core"),f=r(l),d=e("./core/util/http"),c=r(d),s=e("./core/util/events"),p=r(s),v=e("./defaults"),m=r(v);window.UploadJs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this._events=(0,p["default"])(["upload.added","upload.started","upload.progress","upload.done","upload.failed","delete.added","delete.started","delete.done","delete.failed"]);var r=(0,p["default"])(["file.picked","file.delete","item.removed"]);this._events.emit(r);var i=(0,u["default"])(t,r,m["default"],n),a=(0,f["default"])(c["default"],this._events,i);r.on("file.picked",function(e){return a.upload(e)}),r.on("file.delete",function(e){return a.del(e.id)})}return i(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n._events.on(e,t)}),this}}]),e}()},{"./core":4,"./core/util/events":5,"./core/util/http":6,"./defaults":10,"./render/parse":14}]},{},[15]);