/** Upload.js (1.2.1) | https://github.com/georgelee1/Upload.js | MIT */!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){function t(e){return r.indexOf(e.toLowerCase())>=0}function n(n,i){a?(a.push([n,i]),1===a.length&&e.get("allowed_types","types",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=[].concat.apply([],e.map(function(e){return n[e]||e})).map(function(e){return e.toLowerCase()}),a.forEach(function(e){var n=o(e,2),r=n[0],a=n[1];return a(t(r))}),a=void 0})):i(t(n))}var r=void 0,a=[];return{isAllowed:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(f){o=!0,a=f}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n["default"]=r},{}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r){function a(r,a,i){n.get("upload.url","upload.param","upload.additionalParams","upload.headers",function(n,u,f,l){var c=Object.assign({},f,o({},u,r));e(n,c,l).progress(function(e){return t.trigger("upload.progress",{file:r,id:a,progress:e})}).done(function(e){var n=e.uploadImageId;t.trigger("upload.done",{file:r,id:a,uploadImageId:n}),i()}).fail(function(){t.trigger("upload.failed",{file:r,id:a}),i()})})}function i(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach(function(e){var n=e.file,o=e.id;f.isAllowed(n.type,function(e){e?(t.trigger("upload.started",{file:n,id:o}),r.offer(function(e){return a(n,o,e)})):t.trigger("upload.rejected",{file:n,id:o,rejected:"type"})})})}var f=(0,u["default"])(n);return{upload:i}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var i=e("./types"),u=r(i)},{"./types":1}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=(0,i["default"])(function(e,t){e(t)},{delay:100}),o=(0,f["default"])(e,t,n,r);return{upload:o.upload}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var a=e("./util/queue"),i=r(a),u=e("./actions/upload"),f=r(u)},{"./actions/upload":2,"./util/queue":8}],4:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){function e(e){return"undefined"!=typeof e&&!("object"===("undefined"==typeof e?"undefined":a(e))&&!e)}function t(t,n,o){var a=f.concat(d.reduce(function(e,t){return e.concat(t)},[]));a.length&&a.indexOf(t)<0&&console.warn("Attemping to listen to an unknown event. "+("'"+t+"' is not one of '"+a.join(", ")+"'")),"function"==typeof n&&(o=n,n=i);var u=e(n)?n.toString():i;"function"==typeof o&&(l[t]||(l[t]=r({},i,[])),l[t][u]||(l[t][u]=[]),l[t][u].push(o))}function n(t,n){if(l[t]){var o=!!e(n)&&n.toString();o?delete l[t][o]:l[t]=r({},i,[])}}function o(t,n){if(l[t]){var r=!!e(n.id)&&n.id.toString();r&&l[t][r]&&l[t][r].forEach(function(e){return e(Object.assign({type:t},n))}),l[t][i].forEach(function(e){return e(Object.assign({type:t},n))})}c.forEach(function(e){return e.trigger(t,n)})}function u(e){e&&e.trigger&&(c.push(e),e._parent(f))}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l={},c=[],d=[];return{on:t,off:n,trigger:o,emit:u,_parent:function(e){d.push(e)}}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=o;var i="$all"},{}],5:[function(e,t,n){"use strict";function r(e){function t(e){return"function"==typeof e&&(f=e),d}function n(e){return"function"==typeof e&&(l=e),d}function r(e){return"function"==typeof e&&(c=e),d}function a(){var t=new FormData;Object.keys(i).forEach(function(e){var n=i[e];Array.isArray(n)?n.forEach(function(n){n.type&&n.name?t.append(e,n,n.name):t.append(e,n)}):n.type&&n.name?t.append(e,n,n.name):t.append(e,n)});var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(n.status>=200&&n.status<300)try{l(JSON.parse(n.response))}catch(e){l({})}else c()},n.upload.addEventListener("progress",function(e){f(Math.ceil(e.loaded/e.total*100))},!1),n.open("POST",e,!0),u&&Object.keys(u).forEach(function(e){n.setRequestHeader(e,u[e])}),n.send(t)}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=o,l=o,c=o,d={};return d.progress=t,d.done=n,d.fail=r,a(),d}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var o=function(){}},{}],6:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e&&"object"===("undefined"==typeof e?"undefined":i(e))&&!Array.isArray(e)}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var u=n.shift();return o(e)&&o(u)&&Object.keys(u).forEach(function(t){o(u[t])?(e[t]||(e[t]={}),a(e[t],u[t])):Object.assign(e,r({},t,u[t]))}),a.apply(void 0,[e].concat(n))}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=a},{}],7:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){function t(t){return t.map(function(t){var n=void 0,r=e;return t.split(".").forEach(function(e){n=r[e],r=n||{}}),n})}function n(){for(var e=[],n=void 0,o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];a.forEach(function(t){"string"==typeof t?e.push(t):"function"==typeof t&&(n=t)});var u=t(e);if(!n)return u=u.map(function(e){return"function"!=typeof e?e:0===e.length?e():void 0}),u.length>1?u:u[0];var f=u.filter(function(e){return"function"==typeof e}).length;if(0===f)n.apply(void 0,r(u));else{var l=function(e){return function(t){u[e]=t,f--,0===f&&n.apply(void 0,r(u))}};u.forEach(function(e,t){"function"==typeof e&&(e.length>0?e(l(t)):l(t)(e()))})}}return{get:n}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],8:[function(e,t,n){"use strict";function r(e){function t(){if(l.length<a){var e=f.shift();if(void 0!==e){var n=++c,r=function(){var e=l.indexOf(n);e>=0&&(l.splice(e,1),t())},u=function(){return o.apply(void 0,[e.item,r])};l.push(n),i?setTimeout(u,i):u()}}}function n(e){return(!u||f.length<u)&&(f.push({item:e}),t(),!0)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e,a=Math.max(r.concurrency,1)||1,i=Math.max(r.delay,0)||0,u=Math.max(r.size,0)||0,f=[],l=[],c=0;return{offer:n}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],9:[function(e,t,n){"use strict";t.exports={max:10,types:{images:["image/jpg","image/jpeg","image/png","image/gif"]},allowed_types:["images"],upload:{url:"",param:"file",additionalParams:{},headers:{}},"delete":{url:"",param:"file",additionalParams:{},headers:{}}}},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=(0,f.make)("div",{"class":"item new"}),t=(0,f.make)("div",{"class":"icon plus"});return(0,f.append)(e,t),e}function i(e,t){var n=(0,f.make)("input",{type:"file",multiple:"multiple"});return(0,f.on)(n,"change",function(){for(var e=Date.now(),r=0;r<n.files.length;r++)t.trigger("file.picked",{file:n.files.item(r),id:r+"_"+e})}),(0,f.on)(e,"click",n.click.bind(n)),n}function u(e,t,n){(0,f.addClass)(e,"uploadjs");var r=(0,f.make)("div",{"class":"uploadjs-container"});f.append.apply(void 0,[r].concat(o(t)));var u=(0,f.make)("div",{"class":"uploadjs-container"});(0,f.append)(e,r,u);var d=a();return(0,f.append)(u,d),(0,f.append)(e,i(d,n)),n.on("upload.started",function(e){var t=e.file,o=e.id,a=(0,c["default"])({type:l.TYPE_IMAGE,fileId:o,file:t,events:n});(0,f.append)(r,a)}),t.splice(0,t.length),(0,f.data)(e,"upload",{url:"upload.url",param:"upload.param",deleteUrl:"delete.url",deleteParam:"delete.param",allowedTypes:"allowed_types",additionalParam:"upload.additionalParams",header:"upload.headers",deleteAdditionalParam:"delete.additionalParams",deleteHeader:"delete.headers"})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=u;var f=e("../util/dom"),l=e("../item"),c=r(l)},{"../item":11,"../util/dom":13}],11:[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(e.file){var t=(0,s.make)("img"),n=new FileReader;return n.onload=function(e){t.setAttribute("src",e.target.result)},n.readAsDataURL(e.file),Object.assign({},e,{ele:t})}return Object.assign({},e,{ele:(0,s.make)("img",{src:e.src})})}function a(e){var t=!!e.file,n=(0,s.make)("div",{"class":["item"].concat(t?["uploading"]:[]).join(" ")});(0,s.append)(n,e.ele),(0,s.marker)(n,"status"),(0,s.marker)(n,"actions");var r=void 0;return t&&(r=(0,s.make)("div",{"class":"progress"}),(0,s.replaceMarker)(n,"status",(0,s.make)("div",{"class":"spinner"}),(0,s.make)("div",{"class":"icon upload"}),r)),Object.assign({},e,{ele:n,_progress:r})}function i(e,t){if(t.id){var n=(0,s.make)("div",{"class":"actions"}),r=(0,s.make)("div",{"class":"action del"});(0,s.append)(n,r),(0,s.append)(r,(0,s.make)("div",{"class":"trash"})),(0,s.replaceMarker)(e,"actions",n),(0,s.on)(r,"click",function(){return t.events.trigger("file.delete",{id:t.id})})}else(0,s.addClass)(e,"static")}function u(e,t){var n=(0,s.make)("div",{"class":"icon "+t});(0,s.append)(n,(0,s.make)("i")),(0,s.replaceMarker)(e,"status",n),setTimeout(function(){(0,s.addClass)(n,"going"),setTimeout(function(){(0,s.replaceMarker)(e,"status"),(0,s.removeClass)(n,"going")},2e3)},2e3)}function f(e){e.events.off("upload.progress",e.fileId),e.events.off("upload.done",e.fileId),e.events.off("upload.failed",e.fileId)}function l(e,t){setTimeout(function(){(0,s.addClass)(e,"removed"),setTimeout(function(){e.parentNode.removeChild(e)},1e3)},3e3),f(t)}function c(e,t,n){e.events.on("upload.progress",e.fileId,function(e){var t=e.progress,r=0-(100-t);n.style.transform="translateX("+r+"%)"}),e.events.on("upload.done",e.fileId,function(n){var r=n.id;e.id=r,u(t,"done"),(0,s.removeClass)(t,"uploading"),i(t,{id:r}),f(e)}),e.events.on("upload.failed",e.fileId,function(){(0,s.addClass)(t,"stopped"),u(t,"error"),l(t,e)})}function d(e){var t=a((v[e.type]||v.NOOP)(e));return e.file?c(e,t.ele,t._progress):i(t.ele,e),t.ele}Object.defineProperty(n,"__esModule",{value:!0}),n.TYPE_IMAGE=void 0,n.imageRenderer=o,n["default"]=d;var s=e("../util/dom"),p=n.TYPE_IMAGE="image",v=r({NOOP:function(){return(0,s.make)("div")}},p,o)},{"../util/dom":13}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return(0,f["default"])(Object.assign({type:u.TYPE_IMAGE},(0,i.attrs)(e,"src"),{id:e.dataset.uploadImageId,events:t}))}function a(e,t){var n=(0,i.children)(e,"img").map(function(e){return o(e,t)});return(0,i.empty)(e),(0,c["default"])(e,n,t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var i=e("../util/dom"),u=e("../item"),f=r(u),l=e("../container"),c=r(l)},{"../container":10,"../item":11,"../util/dom":13}],13:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){for(var n=[],r=e.children,o=(t||"").toLowerCase(),a=0;a<r.length;a++){var i=r.item(a);t&&i.nodeName.toLowerCase()!==o||n.push(i)}return n}function a(e){for(var t=e.className?e.className.split(" "):[],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),e.className=t.join(" ")}function i(e){for(var t=e.className?e.className.split(" "):[],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.forEach(function(e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}),e.className=t.join(" ")}function u(e,t){var n=document.createElement(e);return t&&Object.keys(t).forEach(function(e){"class"===e?a.apply(void 0,[n].concat(r((t[e]||"").split(" ")))):n.setAttribute(e,t[e])}),n}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){e.appendChild(t)})}function l(e,t){return"up-marker-"+e+"-"+t}function c(e,t){f(e,document.createComment(l(t,"start")),document.createComment(l(t,"end")))}function d(e,t){for(var n=l(t,"start"),r=l(t,"end"),o=!1,a=e.firstChild,i=function(e,t){return a.parentNode.insertBefore(t,e)},u=arguments.length,f=Array(u>2?u-2:0),c=2;c<u;c++)f[c-2]=arguments[c];for(;a;){if(8===a.nodeType){if(a.nodeValue===n){o=!0,a=a.nextSibling;continue}if(a.nodeValue===r)return void f.forEach(i.bind(void 0,a))}if(o){var d=a.nextSibling;a.parentNode.removeChild(a),a=d}else a=a.nextSibling}}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function p(e){for(var t={},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(n){t[n]=e.getAttribute(n)}),t}function v(e,t,n){e.addEventListener(t,n)}function m(e,t,n){var r=e,o=t.split("."),a=o.pop();o.forEach(function(e){var t=r[e];t||(t={},r[e]=t),r=t}),"object"===("undefined"==typeof r?"undefined":g(r))&&(r[a]=n)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return Object.keys(e.dataset).filter(function(e){return e.startsWith(t)}).forEach(function(o){var a=o.substr(t.length);a=a.charAt(0).toLowerCase()+a.slice(1);var i="",u=0;Object.keys(n).forEach(function(e){var t=a.indexOf(e);if(t>=0&&u<e.length){u=e.length;var r=a.slice(e.length);i=n[e]+(r?"."+(r.charAt(0).toLowerCase()+r.slice(1)):"")}}),m(r,i||a,e.dataset[o])}),r}Object.defineProperty(n,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.children=o,n.addClass=a,n.removeClass=i,n.make=u,n.append=f,n.marker=c,n.replaceMarker=d,n.empty=s,n.attrs=p,n.on=v,n.set=m,n.data=y},{}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=e("./render/parse"),i=r(a),u=e("./core"),f=r(u),l=e("./core/util/http"),c=r(l),d=e("./core/util/events"),s=r(d),p=e("./core/util/options"),v=r(p),m=e("./core/util/merge"),y=r(m),g=e("./defaults"),h=r(g);window.UploadJs=function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,b);var n=(0,s["default"])(["upload.started","upload.progress","upload.done"]),r=(0,s["default"])(["file.picked","file.delete"]);n.emit(r);var a=(0,i["default"])(e,r),u=(0,v["default"])((0,y["default"])({},h["default"],a,t)),l=(0,f["default"])(c["default"],n,u);r.on("file.picked",function(e){return l.upload(e)})}},{"./core":3,"./core/util/events":4,"./core/util/http":5,"./core/util/merge":6,"./core/util/options":7,"./defaults":9,"./render/parse":12}]},{},[14]);